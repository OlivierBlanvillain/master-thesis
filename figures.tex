\newcommand\toplisting[0]{\hrule\vspace{5pt}}
\newcommand\bottomlisting[0]{\vspace{4pt}\hrule}

\newcommand\customlisting[5]{
  \begin{figure}[#1]
    \centering
    \begin{minipage}{#3\linewidth}
      \toplisting
      \lstset{caption=#4,label=#2}
      \input{#5}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\transportInterface[1]{
  \begin{figure}[ht]
    \centering
    \begin{minipage}{0.8\linewidth}
      \toplisting
      \input{transport/transport/core/src/main/scala/transport/Transport.listings}
      \lstset{caption=#1,label=transportInterface}
      \input{transport/transport/core/src/main/scala/transport/package.listings}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\actorWrapper[1]{
  \customlisting{ht}{actorWrapper}{0.92}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/ActorWrapper.listings}
}

\newcommand\rawclient[1]{
  \customlisting{ht}{rawclient}{0.71}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawClient.listings}
}

\newcommand\rawserver[1]{
  \customlisting{ht}{rawserver}{0.78}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawServer.listings}
}

\newcommand\yellingActor[1]{
  \customlisting{ht}{yellingActor}{0.68}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/YellingActor.listings}
}

\newcommand\rpcExample[1]{
  \customlisting{p}{rpcExample}{0.99}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RpcExample.listings}
}

\newcommand\engineInterface[1]{
  \customlisting{ht}{engineInterface}{0.75}{#1}
    {survivor/lag-comp/src/main/scala/AbstractEngine.listings}
}

\newcommand\stateGraph[1]{
  \begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\textwidth]{state-graph}
    \input{figures/state-graph.tex}
    \caption{#1}
    \label{stateGraph}
  \end{figure}
}

\newcommand\lagcompEngine[1]{
  \begin{figure}[ht]
    \centering
    \input{figures/lagcomp-engine.tex}
    \caption{#1}
    \label{lagcompEngine}
  \end{figure}
}
