\newcommand\toplisting[0]{\hrule\vspace{5pt}}
\newcommand\bottomlisting[0]{\vspace{4pt}\hrule}

\newcommand\customlisting[4]{
  \begin{figure}[ht]
    \centering
    \begin{minipage}{#2\linewidth}
      \toplisting
      \lstset{caption=#3,label=#1}
      \input{#4}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\transportInterface[1]{
  \begin{figure}[ht]
    \centering
    \begin{minipage}{0.8\linewidth}
      \toplisting
      \input{transport/transport/core/src/main/scala/transport/Transport.listings}
      \lstset{caption=#1,label=transportInterface}
      \input{transport/transport/core/src/main/scala/transport/package.listings}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\actorWrapper[1]{
  \customlisting{actorWrapper}{0.92}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/ActorWrapper.listings}
}

\newcommand\yellingActor[1]{
  \customlisting{yellingActor}{0.68}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/YellingActor.listings}
}

\newcommand\rpcExample[1]{
  \begin{figure}[ht]
    \centering
    \begin{minipage}{0.74\linewidth}
      \toplisting
      \input{transport/examples/report-listings/jvm/src/main/scala/examples/RpcExampleApi.listings}
      \vspace{12pt}
      \input{transport/examples/report-listings/jvm/src/main/scala/examples/RpcExampleServer.listings}
      \vspace{12pt}
      \lstset{caption=#1,label=rpcExample}
      \input{transport/examples/report-listings/jvm/src/main/scala/examples/RpcExampleClient.listings}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\engineInterface[1]{
  \customlisting{engineInterface}{0.75}{#1}
    {survivor/lag-comp/src/main/scala/AbstractEngine.listings}
}

\newcommand\stateGraph[1]{
  \begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\textwidth]{state-graph}

      \input{figures/stateg.tex}
      \caption{#1}
      \label{stateGraph}
  \end{figure}
}

\newcommand\lagcompEngine[1]{
  \begin{figure}[ht]
    \centering
    \input{figures/gud.tex}
    \caption{#1}
    \label{lagcompEngine}
  \end{figure}
}

\newcommand\rawclient[1]{
  \customlisting{rawclient}{0.71}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawClient.listings}
}

\newcommand\rawserver[1]{
  \customlisting{rawserver}{0.78}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawServer.listings}
}
