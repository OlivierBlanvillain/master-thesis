\newcommand\toplisting[0]{\hrule\vspace{5pt}}
\newcommand\bottomlisting[0]{\vspace{4pt}\hrule}

\newcommand\customlisting[5]{
  \begin{figure}[#1]
    \centering
    \begin{minipage}{#3\linewidth}
      \toplisting
      \lstset{caption=#4,label=#2}
      \input{#5}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\transportInterface[1]{
  \begin{figure}[t]
    \centering
    \begin{minipage}{0.8\linewidth}
      \toplisting
      \input{transport/transport/core/src/main/scala/transport/Transport.listings}
      \lstset{caption=#1,label=transportInterface}
      \input{transport/transport/core/src/main/scala/transport/package.listings}
      \bottomlisting
    \end{minipage}
  \end{figure}
}

\newcommand\actorWrapper[1]{
  \customlisting{t}{actorWrapper}{0.92}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/ActorWrapper.listings}
}

\newcommand\rawclient[1]{
  \customlisting{p}{rawclient}{0.71}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawClient.listings}
}

\newcommand\rawserver[1]{
  \customlisting{p}{rawserver}{0.78}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RawServer.listings}
}

\newcommand\yellingActor[1]{
  \customlisting{t}{yellingActor}{0.68}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/YellingActor.listings}
}

\newcommand\rpcExample[1]{
  \customlisting{p}{rpcExample}{0.99}{#1}
    {transport/examples/report-listings/jvm/src/main/scala/examples/RpcExample.listings}
}

\newcommand\engineInterface[1]{
  \customlisting{t}{engineInterface}{0.75}{#1}
    {survivor/lag-comp/src/main/scala/AbstractEngine.listings}
}

\newcommand\stateGraph[1]{
  \begin{figure}[t]
    \centering
    \begin{tabular}{@{}lccc@{}}
      \toprule
      Received & Time & State Graph & Rendered \\
      \midrule
      \hspace{22.5pt}\raisebox{20pt}{-}  & \raisebox{20pt}{\emph{t\textsubscript{1}}} & \input{figures/state-graph1.tex} & \raisebox{20pt}{\emph{\state{1}}} \\
      \input{figures/state-graph-p1.tex} & \raisebox{21pt}{\emph{t\textsubscript{2}}} & \input{figures/state-graph2.tex} & \raisebox{21pt}{\emph{\state{2}}} \\
      \hspace{22.5pt}\raisebox{20pt}{-}  & \raisebox{20pt}{\emph{t\textsubscript{3}}} & \input{figures/state-graph3.tex} & \raisebox{20pt}{\emph{\state{3}}} \\
      \input{figures/state-graph-p2.tex} & \raisebox{59pt}{\emph{t\textsubscript{4}}} & \input{figures/state-graph4.tex} & \raisebox{59pt}{\emph{\stateprime{4}}} \\
      \bottomrule
    \end{tabular}
    \caption{#1}
    \label{stateGraph}
  \end{figure}
}

\newcommand\lagcompEngine[1]{
  \begin{figure}[t]
    \centering
    \input{figures/lagcomp-engine.tex}
    \caption{#1}
    \label{lagcompEngine}
  \end{figure}
}

\newcommand\calleeSequence[1]{
  \begin{figure}[p]
    \centering
    \input{figures/sequence-diagram2.tex}
    \caption{#1}
    \label{calleeSequence}
  \end{figure}
}

\newcommand\callerSequence[1]{
  \begin{figure}[p]
    \centering
    \input{figures/sequence-diagram1.tex}
    \caption{#1}
    \label{callerSequence}
  \end{figure}
}

\newcommand\implSummary[1]{
  \begin{table}[p]
    \caption{#1}
    \label{implSummary}
    \begin{tabular}{@{}lccc@{}}
      \toprule
      Platform & WebSocket & SockJS & WebRTC\tabularnewline
      \midrule
      JavaScript & client & client & client\tabularnewline
      Play Framework & server & server & -\tabularnewline
      Netty & both & - & -\tabularnewline
      Tyrus & client & - & -\tabularnewline
      \bottomrule
    \end{tabular}
  \end{table}
}
