% \usepackage[usenames,dvipsnames]{pstricks}
% \usepackage{epsfig}
% \usepackage{pst-grad} % For gradients
% \usepackage{pst-plot} % For axes
% User Packages:
% 
% 
\psscalebox{1.0 1.0} % Change this value to rescale the drawing.
{
\begin{pspicture}(0,-4.4)(13.2,4.4)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](2.4,3.6)(0.4,2.8)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](7.2,3.6)(3.2,2.8)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](10.0,3.6)(8.0,2.8)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](12.8,3.6)(10.8,2.8)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](6.0,1.2)(0.8,-1.2)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](12.4,1.2)(7.2,-1.2)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](4.8,-2.8)(1.6,-3.6)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](11.6,-2.8)(8.4,-3.6)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](13.2,4.0)(0.0,-3.6)
\rput[bl](3.55,3.08){\emph{broadcastConnection}}
\rput[bl](8.24,3.08){\emph{nextState}}
\rput[bl](11.12,3.08){\emph{initState}}
\rput[bl](2.5,1.2){\emph{\bf ClockSync}}
\rput[bl](9.1,1.2){\emph{\bf StateLoop}}
\rput[bl](2.4,0.7){\emph{broadcastConnection}}
\psframe[linecolor=black, linewidth=0.03, dimen=outer](6.0,-0.4)(3.6,-1.2)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](9.6,-0.4)(7.2,-1.2)

\rput[bl](4.2,-1.04){\emph{identity}}
\rput[bl](7.8,-0.92){\emph{stateAt}}
\rput[bl](1.8,-3.44){\emph{triggerRendering}}
\rput[bl](9.3,-3.44){\emph{futureAct}}
\psline[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{<-}(5.2,1.2)(5.2,2.8)
\psline[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{<-}(8.4,1.2)(8.4,2.8)
\psline[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{<-}(11.6,1.2)(11.6,2.8)
\rput[bl](7.5,0.7){\emph{nextState}}
\rput[bl](10.7,0.7){\emph{initState}}
\psframe[linecolor=black, linewidth=0.03, dimen=outer](12.4,-0.4)(10.0,-1.2)
\psframe[linecolor=black, linewidth=0.03, dimen=outer](3.2,-0.4)(0.8,-1.2)
\rput[bl](0.9,3.08){\emph{render}}
\rput[bl](1.1,-1.04){\emph{globalTime}}
\rput[bl](10.6,-0.92){\emph{receive}}
\rput[bl](6.0,4.0){\emph{\bf Engine}}
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(2.0,-1.2)(2.0,-2.4)(0.8,-2.0)(0.4,-2.4)(0.0,-2.8)(0.4,-3.6)(1.6,-3.35)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(8.4,-1.2)(8.4,-2.0)(2.8,-2.0)(1.6,-2.4)(0.4,-2.8)(0.8,-3.2)(1.6,-3.05)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(2.4,-1.2)(2.4,-1.6)(8.0,-3.2)(8.4,-3.35)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(4.8,-3.2)(5.6,-3.2)(5.2,-2.4)(4.4,-2.4)(3.6,-2.4)(1.6,-2.8)(0.8,-2.0)(0.0,-1.2)(0.8,2.0)(0.8,2.8)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(11.6,-3.05)(12.4,-3.2)(12.4,-2.4)(11.2,-2.4)(10.0,-2.4)(7.6,-2.8)(6.8,-1.6)(6.0,-0.4)(6.4,2.0)(6.4,2.8)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(6.8,2.8)(6.8,1.2)(6.4,-0.8)(7.2,-1.6)(8.0,-2.4)(10.8,-2.0)(10.8,-1.2)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(11.6,-3.35)(12.8,-3.6)(13.2,-2.8)(12.8,-2.4)(12.4,-2.0)(11.2,-2.0)(11.2,-1.2)
\psbezier[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(4.8,-1.2)(4.8,-2.0)(7.6,-2.8)(8.4,-3.05)
\psline[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(3.2,-4.4)(3.2,-3.6)
\psline[linecolor=black, linewidth=0.03, arrowsize=0.1cm 2.0,arrowlength=1.4,arrowinset=0.0]{->}(10.0,-4.4)(10.0,-3.6)
\end{pspicture}
}

